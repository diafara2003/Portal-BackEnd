import{F as U}from"./Fondo.02dc25e2.js";import{d as P}from"./Save.e9030533.js";import{I as W,a as C}from"./usuarioDTO.2394de0e.js";import{r as i,am as w,A as V,b as E,a as I,d,B as A,j as e,G as n,e as z,T as S,a1 as l,L as j}from"./index.ad9b7e92.js";import{V as c}from"./ValidationForms.a47614c1.js";import{C as O,a as _,b as D}from"./CardHeader.67279b64.js";import{C as F}from"./CardActions.8f5f35f6.js";const L=()=>{const[o,u]=i.exports.useState(W),[h,g]=i.exports.useState(C),{updateUser:p,storeUsuario:s}=i.exports.useContext(w),{showAlert:f,stateAlert:a}=i.exports.useContext(V),b=async()=>{const r=await E({metodo:"Usuario/detallado",type:I.GET});r!=null&&u(()=>r.informacion)},v=r=>{const{name:t,value:m}=r.target;u({...o,[t]:m})},T=()=>{let r=C;if(!new c().EmailIsValid(o.correo)){debugger;return{...r,email:{hasError:!0,msn:"Correo invalido"}}}return o.correo==""?{...r,email:{hasError:!0,msn:"Campo obligatorio"}}:new c().EmailIsValid(o.correo)?o.nombre==""?{...r,nombre:{hasError:!0,msn:"Campo obligatorio"}}:o.cargo==""?{...r,cargo:{hasError:!0,msn:"Campo obligatorio"}}:o.documento==""?{...r,documento:{hasError:!0,msn:"Campo obligatorio"}}:new c().OnlyInteger(o.documento)?o.celular==""?{...r,celular:{hasError:!0,msn:"Campo obligatorio"}}:new c().PhoneValid(o.celular)?r:{...r,email:{hasError:!0,msn:"Ingrese un celular valido"}}:{...r,documento:{hasError:!0,msn:"Ingrese un documento valido"}}:{...r,email:{hasError:!0,msn:"Ingrese un correo valido"}}},y=async()=>{var m,x;const r=T();if(r.cargo.hasError||r.celular.hasError||r.documento.hasError||r.email.hasError||r.nombre.hasError){g(r);return}const t=await E({metodo:"Usuario/actualizardatos",type:I.POST,AllowAnonymous:!1,data:o});t!=null&&t.item1.success&&p({...s.user,nombreUsuario:t.item2.nombre,userCorreo:t.item2.correo}),f((x=(m=t==null?void 0:t.item1)==null?void 0:m.mensaje)!=null?x:"","Actualizar informaci\xF3n","success")};return i.exports.useEffect(()=>{b()},[]),{...o,onInputChange:v,handleSubmit:y,validation:h,stateAlert:a}},H=()=>{const{cargo:o,celular:u,documento:h,nombre:g,correo:p,onInputChange:s,handleSubmit:f,validation:a,stateAlert:b}=L();return d(A,{children:[e(n,{item:!0,xs:12,mt:1,position:"absolute",mr:2,children:e(U,{})}),d(n,{container:!0,justifyContent:"center",position:"relative",top:79,children:[b.estado?e(z,{}):null,e(n,{item:!0,xs:6,children:d(O,{children:[e(_,{title:e(S,{variant:"body1",children:"Mis datos personales"})}),e(D,{children:d(n,{container:!0,spacing:2,p:2,children:[e(n,{item:!0,xs:6,children:e(l,{id:"txtPaginaWeb",label:"Nombres",name:"nombre",fullWidth:!0,size:"small",error:a.nombre.hasError,helperText:a.nombre.msn,onChange:s,value:g})}),e(n,{item:!0,xs:6,children:e(l,{id:"txtPaginaWeb",label:"Documento de identidad",name:"documento",error:a.documento.hasError,helperText:a.documento.msn,onChange:s,value:h,fullWidth:!0,size:"small"})}),e(n,{item:!0,xs:6,children:e(l,{id:"txtPaginaWeb",label:"Cargo",name:"cargo",error:a.cargo.hasError,helperText:a.cargo.msn,onChange:s,value:o,fullWidth:!0,size:"small"})}),e(n,{item:!0,xs:6,children:e(l,{id:"txtPaginaWeb",label:"Correo electronico",name:"correo",error:a.email.hasError,helperText:a.email.msn,onChange:s,value:p,fullWidth:!0,size:"small"})}),e(n,{item:!0,xs:6,children:e(l,{id:"txtPaginaWeb",label:"Celular",name:"celular",error:a.celular.hasError,helperText:a.celular.msn,onChange:s,value:u,fullWidth:!0,size:"small"})})]})}),e(F,{children:e(A,{display:"flex",justifyContent:"end",width:"100%",children:e(j,{onClick:f,type:"submit",loadingPosition:"end",variant:"contained",endIcon:e(P,{}),children:"Guardar"})})})]})})]})]})};export{H as DatosUsuarioPage,H as default};
