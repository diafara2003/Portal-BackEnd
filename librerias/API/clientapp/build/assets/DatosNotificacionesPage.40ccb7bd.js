import{H as J}from"./HeaderComponent.0bc9406d.js";import{d as Q}from"./History.e8cf50f5.js";import{r as d,a as E,b as P,d as a,B as f,j as e,G as p,P as V,T as N,Y as S,a1 as X,f as H,a2 as I,L as ee}from"./index.ad9b7e92.js";import{d as U}from"./DeleteOutlineOutlined.6e9278a5.js";import{T as j,a as w,b as $,c as A,d as c,e as _}from"./TableRow.15b8d78b.js";import{S as F}from"./SkeletonDynamic.d264f9d2.js";import{E as te}from"./Eliminar.18aca338.js";import{D as z,a as R,b as q,c as G}from"./DialogTitle.c4648013.js";import{d as ie}from"./Save.e9030533.js";import{A as L}from"./Autocompleteasync.c2e150bf.js";import{I as oe}from"./usuarioDTO.2394de0e.js";import{T as ae,a as W}from"./Tabs.f8373235.js";import{A as ne}from"./Add.73b42c3e.js";import"./Popper.d79c6681.js";var D=(i=>(i[i.Proveddores=1]="Proveddores",i[i.Licitaciones=2]="Licitaciones",i))(D||{});const Z={categoria:0,constructora:0,id:0,usuario:0,zona:""},re={hasError:!1,msn:""},le=i=>{const[o,r]=d.exports.useState([]),[t,l]=d.exports.useState(re),[n,s]=d.exports.useState(!1),[h,T]=d.exports.useState(i),x=async m=>{var k,O;const v={metodo:C(),type:E.POST,data:m},u=await P(v);u!=null&&u.item1.success?r([...o,u.item2]):l({hasError:!0,msn:(O=(k=u==null?void 0:u.item1)==null?void 0:k.mensaje)!=null?O:""})},b=async()=>{s(!0);const m={metodo:C(),type:E.GET},v=await P(m);v!=null?r(()=>v):r([]),s(!1)},g=async m=>{const v={metodo:`ContactoNotificacion?id=${m}`,type:E.DELETE};return await P(v),r(()=>[...o.filter(u=>u.id!=m)]),!0},C=()=>{let m="";return m=`ContactoNotificacion/${h==D.Licitaciones?"licitaciones":"proveedor"}`,m};return{handleAgregarNotificacion:x,consultarNotificacion:b,eliminarContacto:g,lstNotificacion:o,error:t,isLoading:n,setTipo:T}},ce=()=>{const[i,o]=d.exports.useState(D.Proveddores),[r,t]=d.exports.useState(!1),[l,n]=d.exports.useState(!1),[s,h]=d.exports.useState(0),{consultarNotificacion:T,setTipo:x,lstNotificacion:b,isLoading:g,eliminarContacto:C,handleAgregarNotificacion:m}=le(i),[v,u]=d.exports.useState(0),k=(y,Y)=>{h(Y)},O=y=>{y.usuario>0&&(t(!1),m(y))},K=y=>{n(!0),u(y)},M=()=>{C(v),u(0),n(!1)};return d.exports.useEffect(()=>{const y=s==0?D.Proveddores:D.Licitaciones;o(y),x(y)},[s]),d.exports.useEffect(()=>{T()},[i]),d.exports.useEffect(()=>{},[]),{openNew:r,HandleOpenNew:O,setOpenNew:t,openDelete:l,HandleOpenDelete:K,setOpenDelete:n,tabActive:s,handleChange:k,lstNotificacion:b,isLoading:g,HandleDeleteOk:M}},se=({saveUser:i})=>{const[o,r]=d.exports.useState(oe),t=l=>{r(l),i({categoria:0,constructora:0,id:0,usuario:l.id,zona:""})};return a(f,{display:"block",width:"100%",mt:1,children:[e(p,{item:!0,xs:12,children:e(L,{label:"Buscar usuario para notificaci\xF3n",method:"Usuario?tipo=p&filter=",nombreDataOcject:"nombre",fnSeleted:l=>{t(l)}})}),e(p,{item:!0,xs:12,children:e(p,{mt:2,item:!0,xs:12,children:e(V,{variant:"outlined",children:a(f,{p:2,children:[a(f,{display:"flex",alignItems:"center",children:[e(N,{variant:"body1",fontWeight:600,children:"Nombre: "}),a(N,{sx:{pl:1},variant:"body2",children:[o.nombre," "]})]}),a(f,{display:"flex",alignItems:"center",children:[e(N,{variant:"body1",fontWeight:600,children:"Correo: "}),a(N,{sx:{pl:1},variant:"body2",children:[o.correo," "]})]}),a(f,{display:"flex",alignItems:"center",children:[e(N,{variant:"body1",fontWeight:600,children:"Cargo: "}),a(N,{sx:{pl:1},variant:"body2",children:[o.cargo," "]})]})]})})})})]})},de=({saveUser:i})=>{const[o,r]=d.exports.useState(Z),t=(n,s)=>{n.id!=null&&(r({...o,[s]:n.id}),i({...o,[s]:n.id}),console.log({...o,[s]:n.id}))};return e(S,{children:a(p,{container:!0,spacing:2,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",p:1,children:[e(p,{item:!0,xs:12,children:e(L,{label:"Buscar usuario para notificaci\xF3n",method:"Usuario?tipo=p&filter=",nombreDataOcject:"nombre",fnSeleted:n=>{t(n,"usuario")}})}),e(p,{item:!0,xs:12,children:e(L,{label:"Buscar constructora",method:"Constructora?filter=",nombreDataOcject:"nombre",fnSeleted:n=>{t(n,"constructora")}})}),e(p,{item:!0,xs:6,children:e(X,{required:!0,id:"txtzona",label:"Zona",name:"zona",onChange:n=>{const{name:s,value:h}=n.target;r({...o,[s]:h}),console.log({...o,[s]:h})},fullWidth:!0,size:"small"})}),e(p,{item:!0,xs:6,children:e(L,{label:"Buscar categoria",method:"EspecialidadERP/Categorias?filter=",nombreDataOcject:"nombre",fnSeleted:n=>{t(n,"categoria")}})})]})})},he=({datatable:i,valorDelete:o})=>{const r=t=>{o(t)};return e(S,{children:e(j,{sx:{maxHeight:440},children:a(w,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[e($,{children:a(A,{children:[a(c,{align:"left",style:{fontWeight:"bold"},children:["Nombres"," "]},"thNombre"),e(c,{align:"left",style:{fontWeight:"bold"},children:"Categoria"},"thCategoria"),e(c,{align:"left",style:{fontWeight:"bold"},children:"Zona"},"thZona"),e(c,{align:"left",style:{fontWeight:"bold"},children:"Constructora"},"thConstructora"),e(c,{align:"center",style:{fontWeight:"bold"},children:"Acciones"},"thAcciones")]})}),e(_,{children:i.map(t=>{var l,n;return a(A,{hover:!0,role:"checkbox",tabIndex:-1,children:[e(c,{children:t.usuario.nombres}),e(c,{children:(l=t.categoria)==null?void 0:l.nombre}),e(c,{children:t.zona}),e(c,{children:(n=t.constructora)==null?void 0:n.nombre}),e(c,{align:"center",children:e(H,{onClick:()=>r(t.id),edge:"end","aria-label":"delete",children:e(U,{color:"primary"})})})]},`tr-lici-id-${t.id}`)})})]})})})},ue=({datatable:i,valorDelete:o})=>{const r=t=>{o(t)};return e(S,{children:e(j,{sx:{maxHeight:440},children:a(w,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[e($,{children:a(A,{children:[a(c,{align:"left",style:{fontWeight:"bold"},children:["Nombres"," "]},"thNombre"),e(c,{align:"left",style:{fontWeight:"bold"},children:"Cargo"},"thCargo"),e(c,{align:"left",style:{fontWeight:"bold"},children:"Correo"},"thCorreo"),e(c,{align:"left",style:{fontWeight:"bold"},children:"Celular"},"thCelular"),e(c,{align:"center",style:{fontWeight:"bold"},children:"Acciones"},"thAcciones")]})}),e(_,{children:i.map(t=>a(A,{hover:!0,role:"checkbox",tabIndex:-1,children:[e(c,{children:t.usuario.nombres}),e(c,{children:t.usuario.cargo}),e(c,{children:t.usuario.correo}),e(c,{children:t.usuario.celular}),e(c,{align:"center",children:e(H,{onClick:()=>r(t.id),edge:"end","aria-label":"delete",children:e(U,{color:"primary"})})})]},`tr-prov-id-${t.id}`))})]})})})},me=({title:i,handleOk:o,handleCancel:r})=>{const[t,l]=d.exports.useState(!0);return a(z,{disableEscapeKeyDown:!0,onClose:(s,h)=>{h==="backdropClick"?console.log(h):l(!1)},onBackdropClick:()=>!1,open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"md",children:[e(R,{id:"alert-dialog-title",children:a(N,{children:["  ",i," "]})}),a(q,{children:[e(f,{justifyContent:"center",display:"flex",children:e(te,{})}),e(N,{children:"\xBFEsta seguro que desea eliminar el contacto ?"})]}),a(G,{children:[e(I,{variant:"text",onClick:()=>{r(),l(!1)},children:"Cancelar"}),e(I,{variant:"outlined",color:"error",onClick:()=>{l(!1),o()},autoFocus:!0,children:"Eliminar"})]})]})},fe=({tipoNotificacion:i,title:o,handleOk:r,handleCancel:t})=>{const[l,n]=d.exports.useState(!0),[s,h]=d.exports.useState(Z),T=(b,g)=>{g==="backdropClick"?console.log(g):n(!1)},x=b=>{b.usuario>0&&h(b)};return a(z,{scroll:"paper",disableEscapeKeyDown:!0,fullWidth:!0,open:l,onClose:T,onBackdropClick:()=>!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"md",children:[e(R,{id:"alert-dialog-title",children:o}),e(q,{dividers:!0,children:i==D.Proveddores?e(se,{saveUser:x}):e(de,{saveUser:x})}),a(G,{children:[e(I,{variant:"outlined",onClick:()=>{t(),n(!1)},children:"Cancelar"}),e(ee,{endIcon:e(ie,{}),variant:"contained",color:"primary",onClick:()=>{r(s),n(!1)},children:"Guardar"})]})]})},B=i=>{const{children:o,value:r,index:t,...l}=i;return e("div",{role:"tabpanel",hidden:r!==t,id:`simple-tabpanel-${t}`,"aria-labelledby":`simple-tab-${t}`,...l,children:r===t&&e(f,{sx:{p:3},children:o})})},Ae=()=>{const i={Proveedores:{nombre:"Proveedores",id:1,addTitle:"Nuevo contacto documentaci\xF3n",titleDelete:"Eliminar contacto notificaci\xF3n proveedor"},Licitaciones:{nombre:"Licitaciones",id:2,addTitle:"Nuevo contacto licitaci\xF3n",titleDelete:"Eliminar contacto notificaci\xF3n licitaci\xF3n"}},{tabActive:o,handleChange:r,lstNotificacion:t,isLoading:l,openDelete:n,HandleOpenDelete:s,setOpenDelete:h,HandleDeleteOk:T,openNew:x,HandleOpenNew:b,setOpenNew:g}=ce();return a(S,{children:[e(J,{title:"Datos contacto notificaciones"}),a(f,{sx:{width:"100%"},m:2,mt:1,children:[a(p,{container:!0,children:[e(p,{item:!0,xl:8.7,lg:8,children:a(ae,{value:o,sx:{borderBottom:1,borderColor:"divider"},onChange:r,children:[e(W,{label:i.Proveedores.nombre},`tab-notificaciones-${i.Proveedores.nombre}`),e(W,{label:i.Licitaciones.nombre},`tab-notificaciones-${i.Licitaciones.nombre}`)]})}),e(p,{item:!0,xl:3.3,lg:4,children:a(f,{display:"flex",justifyContent:"end",pr:3,children:[a(I,{variant:"text",onClick:()=>g(!0),children:[" ",e(ne,{sx:{mr:"8px"}}),"Agregar nuevo contacto"]}),a(I,{variant:"text",children:[" ",e(Q,{sx:{mr:"8px"}}),"Historial"]})]})})]}),e(B,{value:o,index:0,children:e(f,{m:1,mt:1,children:l?e(F,{Tipo:"table",NoFilas:5,NoColumnas:5}):e(ue,{datatable:t,valorDelete:C=>{s(C)}})})}),e(B,{value:o,index:1,children:e(f,{m:1,mt:1,children:l?e(F,{Tipo:"table",NoFilas:5,NoColumnas:5}):e(he,{datatable:t,valorDelete:C=>{s(C)}})})})]}),n?e(me,{handleOk:T,handleCancel:()=>h(!1),title:o==0?i.Proveedores.titleDelete:i.Licitaciones.titleDelete}):null,x?e(fe,{handleOk:b,handleCancel:()=>g(!1),title:o==0?i.Proveedores.addTitle:i.Licitaciones.addTitle,tipoNotificacion:o==0?D.Proveddores:D.Licitaciones}):null]})};export{Ae as DatosNotifiaciones,Ae as default};
