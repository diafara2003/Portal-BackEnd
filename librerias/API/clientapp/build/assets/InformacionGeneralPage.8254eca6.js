import{d as z}from"./Save.e9030533.js";import{r as d,am as L,a as C,b as v,d as E,G as t,j as e,T,Y as F,B as O,a2 as P,a1 as u,an as W,L as q}from"./index.ad9b7e92.js";import{V as w}from"./ValidationForms.a47614c1.js";import{H as D}from"./HeaderComponent.0bc9406d.js";import{d as R}from"./History.e8cf50f5.js";import{S as N,a as V}from"./SkeletonDynamic.d264f9d2.js";import{A}from"./Autocompleteasync.c2e150bf.js";import{F as _,a as h}from"./FormGroup.f044d424.js";import{C as b}from"./Checkbox.e07d5e11.js";import{H as j,T as H}from"./Historial-Model.35b6e462.js";import{S as B}from"./Switch.e46fbfe5.js";import"./Popper.d79c6681.js";import"./SwitchBase.70273b65.js";import"./CardHeader.67279b64.js";import"./SinInformacion.9e7bb934.js";import"./DeleteOutlineOutlined.6e9278a5.js";import"./Tabs.f8373235.js";import"./Stack.9bed6c39.js";const M={actividadEconomica:{hasError:!1,msn:""},certificadoISO:{hasError:!1,msn:""},ciudad:{hasError:!1,msn:""},correo:{hasError:!1,msn:""},nombre:{hasError:!1,msn:""},apellido:{hasError:!1,msn:""},numeroIdentificacion:{hasError:!1,msn:""},digitoVerificacion:{hasError:!1,msn:""},paginaWeb:{hasError:!1,msn:""},telefono:{hasError:!1,msn:""},tipoDocumento:{hasError:!1,msn:""},tipoPersona:{hasError:!1,msn:""},direccion:{hasError:!1,msn:""}},$={actividadEconomica:null,apellido:"",certificadoISO:!1,ciudad:null,correo:"",digitoVerificacion:"",direccion:"",fechaRegistro:new Date,nombre:"",numeroIdentificacion:"",paginaWeb:"",telefono:"",tipoDocumento:"",tipoPersona:""},U=()=>{const{storeUsuario:l}=d.exports.useContext(L),[o,c]=d.exports.useState($),[i,p]=d.exports.useState(!0),[m,f]=d.exports.useState(!1),[n,s]=d.exports.useState(M),I=a=>{a.preventDefault(),S()},S=async()=>{const a=G();if(a.isvalid){f(!0);const r={metodo:"TercerosGI/GuardaInfGeneral",type:C.POST,data:o};await v(r),f(!1)}else s({...n,[a.name]:a.property})},y=a=>{const{name:r,value:g}=a.target;c({...o,[r]:g}),s({...n,[r]:{hasError:!1,msn:""}})},G=()=>{const a=o;let r={isvalid:!0,property:{hasError:!1,msn:""},name:""};const g=new w;return a.nombre==null||a.nombre==""?(r.isvalid=!1,r.property={hasError:!0,msn:"El nombre es obligatorio"},r.name="nombre",r):a.apellido==null||a.apellido==""?(r.isvalid=!1,r.property={hasError:!0,msn:"El apellido es obligatorio"},r.name="apellido",r):a.numeroIdentificacion==null||a.numeroIdentificacion==""?(r.isvalid=!1,r.property={hasError:!0,msn:"El documento es obligatorio"},r.name="numeroIdentificacion",r):g.EmailIsValid(a.correo)?a.correo==null||a.correo==""?(r.isvalid=!1,r.property={hasError:!0,msn:"El correo es obligatorio"},r.name="correo",r):a.ciudad==null||a.ciudad.id<=0?(r.isvalid=!1,r.property={hasError:!0,msn:"La ciudad es obligatoria"},r.name="ciudad",r):a.direccion==null||a.direccion==""?(r.isvalid=!1,r.property={hasError:!0,msn:"La direcci\xF3n es obligatoria"},r.name="direccion",r):a.actividadEconomica==null||a.actividadEconomica.id<=0?(r.isvalid=!1,r.property={hasError:!0,msn:"La actividad econ\xF3mica es obligatoria"},r.name="actividadEconomica",r):g.OnlyInteger(a.telefono)?a.telefono==null||a.telefono==""?(r.isvalid=!1,r.property={hasError:!0,msn:"El telefono es obligatoria"},r.name="telefono",r):(g.PhoneValid(a.telefono)||(r.isvalid=!1,r.property={hasError:!0,msn:"El telefono ingresado no es valido"},r.name="telefono"),r):(r.isvalid=!1,r.property={hasError:!0,msn:"El telefono ingresado no es valido"},r.name="telefono",r):(r.isvalid=!1,r.property={hasError:!0,msn:"El correo ingresado no es valido"},r.name="correo",r)},k=async()=>{const a={metodo:`TercerosGI/InformacionGeneral?id=${l.user.idEmpresa}`,AllowAnonymous:!0,type:C.GET},r=await v(a);r!=null&&c(r),p(!1)};return d.exports.useEffect(()=>{k()},[]),{dataInitialState:o,isLoadingCarga:i,isSaving:m,validation:n,selectedCiudad:a=>{c({...o,ciudad:a}),s({...n,ciudad:{hasError:!1,msn:""}})},selectedAcEcono:a=>{c({...o,actividadEconomica:a}),s({...n,actividadEconomica:{hasError:!1,msn:""}})},handleGuardar:I,onInputChange:y}},Y={id:0,idTercero:0,programaAmbiental:!1,programaFactoresRiesgo:!1,programaSaludOcupacional:!1,programaSeguridadEhigiene:!1,tieneComiteSO:!1},J=()=>{const[l,o]=d.exports.useState(Y),c=async()=>{const p={metodo:"TercerosGI/informacionSISO",type:C.GET},m=await v(p);m!=null&&o(m)},i=async(p,m)=>{const f={...l,[p]:!m},n={metodo:"TercerosGI/informacionSISO",type:C.POST,data:f},s=await v(n);s!=null&&o({...f,id:s.codigo})};return d.exports.useEffect(()=>{c()},[]),{state:l,handleChecked:i}},x={formControlLabel:{height:30,"&:hover":{background:"#e9eff4"}}},K=()=>{const{handleChecked:l,state:o}=J();return E(t,{container:!0,children:[e(t,{item:!0,xs:12,children:e(T,{variant:"subtitle2",fontWeight:600,children:"Seguimiento de seguridad y Salud ocupacional SISO"})}),e(t,{item:!0,xs:12,pl:1.5,mt:1,children:E(_,{children:[e(h,{sx:x.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>l("programaSaludOcupacional",o.programaSaludOcupacional),control:e(b,{size:"small",tabIndex:-1,checked:o.programaSaludOcupacional,disableRipple:!0}),label:e(T,{variant:"body1",children:"Cuenta con programa de salud ocupacional actualizado"})}),e(h,{sx:x.formControlLabel,onClick:()=>l("programaFactoresRiesgo",o.programaFactoresRiesgo),control:e(b,{size:"small",tabIndex:-1,checked:o.programaFactoresRiesgo,disableRipple:!0}),label:"Cuenta con programa de factores de riesgos actualizado enfocado a los procesos que desarrolla en obra"}),e(h,{sx:x.formControlLabel,onClick:()=>l("tieneComiteSO",o.tieneComiteSO),control:e(b,{size:"small",tabIndex:-1,checked:o.tieneComiteSO,disableRipple:!0}),label:"Tiene conformado comit\xE9 paritario de S.O \xF3 vig\xEDa S.O"}),e(h,{sx:x.formControlLabel,onClick:()=>l("programaSeguridadEhigiene",o.programaSeguridadEhigiene),control:e(b,{tabIndex:-1,checked:o.programaSeguridadEhigiene,disableRipple:!0,size:"small"}),label:"Tiene actualizado el reglamento interno de higiene y seguridad industrial"}),e(h,{sx:x.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>l("programaAmbiental",o.programaAmbiental),control:e(b,{tabIndex:-1,checked:o.programaAmbiental,disableRipple:!0,size:"small"}),label:e(T,{variant:"body1",children:"Cuenta con plan de manejo ambiental orientado a la actividad que realiza"})})]})})]})},be=()=>{const{isLoadingCarga:l,dataInitialState:o,isSaving:c,validation:i,selectedCiudad:p,selectedAcEcono:m,handleGuardar:f,onInputChange:n}=U(),[s,I]=d.exports.useState(!1),S=()=>{I(!0)};return E(F,{children:[e(D,{title:`${s?"Historial":""} Informaci\xF3n general`}),s?e(j,{_tipoAuditoria:H.InformacionGeneral,onClose:y=>{I(y)}}):e(O,{sx:{m:"1px",background:"white",height:"calc(100vh - 150px)"},children:l==!0?e(O,{m:5,children:e(N,{NoColumnas:3,NoFilas:4,Tipo:"formulario"})}):e(t,{children:e(O,{children:E(t,{container:!0,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",spacing:2,mt:0,children:[e(t,{item:!0,xs:10.5,style:{display:"flex",justifyContent:"end"},children:E(P,{variant:"text",onClick:S,children:[" ",e(R,{sx:{mr:"8px"}}),"Historial"]})}),e(t,{item:!0,xs:3.5,children:e(u,{id:"txtTipoPersona",label:"Tipo persona",value:o.tipoPersona,fullWidth:!0,disabled:!0,error:i.tipoPersona.hasError,helperText:i.tipoDocumento.msn,onChange:n,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(u,{required:!0,id:"txtnombres",label:"Nombres",name:"nombre",value:o.nombre,fullWidth:!0,error:i.nombre.hasError,helperText:i.nombre.msn,onChange:n,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(u,{required:!0,id:"txtApellidos",label:"Apellidos",name:"apellido",value:o.apellido,error:i.apellido.hasError,helperText:i.apellido.msn,fullWidth:!0,onChange:n,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(u,{required:!0,id:"txtIdentificacion",label:"Identificaci\xF3n",name:"numeroIdentificacion",error:i.numeroIdentificacion.hasError,helperText:i.numeroIdentificacion.msn,value:o.numeroIdentificacion,fullWidth:!0,onChange:n,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(A,{label:"Ciudad",method:"Ciudad?filter=",nombreDataOcject:"nombre",fnSeleted:p,showError:i.ciudad,defaultValue:o.ciudad})}),e(t,{item:!0,xs:3.5,children:e(u,{required:!0,id:"txtDireccion",label:"Direccion",name:"direccion",error:i.direccion.hasError,helperText:i.direccion.msn,value:o.direccion,fullWidth:!0,onChange:n,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(u,{required:!0,id:"txtCorreo",label:"Correo",name:"Correo",onChange:n,error:i.correo.hasError,helperText:i.correo.msn,value:o.correo,fullWidth:!0,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(u,{required:!0,id:"txtTelefono",name:"telefono",label:"Telefono",onChange:n,error:i.telefono.hasError,helperText:i.telefono.msn,value:o.telefono,fullWidth:!0,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(u,{id:"txtPaginaWeb",label:"Pagina WEB",onChange:n,name:"paginaWeb",value:o.paginaWeb,fullWidth:!0,size:"small"})}),e(t,{item:!0,xs:3.5,children:e(A,{label:"Actividad econ\xF3mica",method:"ActividadEconomica?filter=",nombreDataOcject:"nombre",fnSeleted:m,showError:i.actividadEconomica,defaultValue:o.actividadEconomica})}),e(t,{item:!0,xs:7,children:e(h,{sx:{fontSize:"12px !important",ml:1},control:e(B,{defaultChecked:!0,size:"small"}),label:"Se encuentra certificado en normas ISO"})}),e(t,{item:!0,xs:10.5,children:e(W,{orientation:"horizontal"})}),e(t,{item:!0,xs:10.5,children:e(K,{})}),e(t,{item:!0,xs:10.5,style:{display:"flex",justifyContent:"end"},children:e(V,{direction:"row",children:e(q,{type:"submit",loadingPosition:"end",variant:"contained",onClick:f,loading:c,endIcon:e(z,{}),children:"Guardar"})})})]})})})})]})};export{be as InformacionGeneralPage,be as default};
