import{H as W}from"./HeaderComponent.0bc9406d.js";import{r as u,A as z,a as x,b as C,d as h,G as i,j as e,T as g,Y as D,B as E,a2 as H,F as A,I as T,aF as F,$ as P,aG as S,a1 as B,an as U,L as $}from"./index.ad9b7e92.js";import{V as Y}from"./ValidationForms.a47614c1.js";import{S as J,a as K}from"./SkeletonDynamic.d264f9d2.js";import{d as Q}from"./History.e8cf50f5.js";import{A as X}from"./Autocompleteasync.c2e150bf.js";import{d as Z}from"./Save.e9030533.js";import{F as ee,a as I}from"./FormGroup.f044d424.js";import{C as y}from"./Checkbox.e07d5e11.js";import"./Popper.d79c6681.js";import"./SwitchBase.70273b65.js";const ae={banco:"",bancoTexto:"",ciudad:0,ciudadTexto:"",correoPagos:"",id:0,numero:"",tipoCuenta:0,tipoCuentaTexto:""},L={banco:{hasError:!1,msn:""},ciudad:{hasError:!1,msn:""},correoPago:{hasError:!1,msn:""},numero:{hasError:!1,msn:""},tipoCuenta:{hasError:!1,msn:""}},re=()=>{const[o,n]=u.exports.useState(ae),[c,p]=u.exports.useState(L),[m,l]=u.exports.useState(!1),[s,f]=u.exports.useState(!1),[b,v]=u.exports.useState([]),[d,k]=u.exports.useState([]),{showAlert:G,stateAlert:se}=u.exports.useContext(z),R=(r,t)=>{n({...o,[r]:t})},w=r=>{const{name:t,value:a}=r.target;n({...o,[t]:a}),p({...c,[t]:{hasError:!1,msn:""}})},_=r=>{const t=r;n({...o,ciudad:t.id,ciudadTexto:t.nombre}),p({...c,ciudad:{hasError:!1,msn:""}})},N=async()=>{l(!0);const r={metodo:"TercerosGI/informacionbancaria",type:x.GET},t=await C(r);l(!1);debugger;t!=null&&n(t)},V=async()=>{const r={metodo:"TercerosGI/bancos",type:x.GET},t=await C(r);t!=null&&v(t)},q=async()=>{const r={metodo:"TercerosGI/tipocuentas",type:x.GET},t=await C(r);t!=null&&k(t)},O=async()=>{f(!0);const r={metodo:"TercerosGI/informacionbancaria",type:x.POST,data:o},t=await C(r);debugger;t!=null&&t.success&&(n({...o,id:t.codigo}),G("Se ha guardado la informaci\xF3n exitosamente","Informaci\xF3n bancaria","success")),f(!1)},j=()=>{debugger;const r=M();r.isvalid?O():p({...L,[r.name]:r.property})},M=()=>{const r=o,t=new Y;let a={isvalid:!0,property:{hasError:!1,msn:""},name:""};return r.banco==""?(a.isvalid=!1,a.property={hasError:!0,msn:"El banco  es obligatorio"},a.name="banco",a):r.ciudad<=0?(a.isvalid=!1,a.property={hasError:!0,msn:"La ciudad  es obligatorio"},a.name="ciudad",a):r.tipoCuenta<=0?(a.isvalid=!1,a.property={hasError:!0,msn:"El tipo de cuenta  es obligatorio"},a.name="tipoCuenta",a):r.numero==null||r.numero==""?(a.isvalid=!1,a.property={hasError:!0,msn:"El n\xFAmero de la cuenta es obligatorio"},a.name="numero",a):t.OnlyInteger(r.numero)?r.numero.toString().length<7?(a.isvalid=!1,a.property={hasError:!0,msn:"El n\xFAmero de la cuenta es incorrecto"},a.name="numero",a):r.correoPagos==null||r.correoPagos==""?(a.isvalid=!1,a.property={hasError:!0,msn:"El correo de notificaci\xF3n de pagos es obligatorio"},a.name="correoPagos",a):(t.EmailIsValid(r.correoPagos)||(a.isvalid=!1,a.property={hasError:!0,msn:"El correo ingresado no es valido"},a.name="correoPagos"),a):(a.isvalid=!1,a.property={hasError:!0,msn:"El n\xFAmero de la cuenta es incorrecto"},a.name="numero",a)};return u.exports.useEffect(()=>{Promise.all([N(),V(),q()])},[]),{state:o,stateBancos:b,statetipoCuenta:d,isLoading:m,isSaving:s,handleguardar:j,validation:c,onInputChange:w,handleChange:R,selectedCiudad:_}},te={autoRetenedorICA:!1,autorretenedor:!1,declarante:!1,granContribuyente:!1,id:0,idTercero:0,responsableIVA:!1},oe=()=>{const[o,n]=u.exports.useState(te),c=async()=>{const m={metodo:"TercerosGI/informaciontributaria",type:x.GET},l=await C(m);l!=null&&n(l)},p=async(m,l)=>{const s={...o,[m]:!l},f={metodo:"TercerosGI/informaciontributaria",type:x.POST,data:s},b=await C(f);b!=null&&n({...s,id:b.codigo})};return u.exports.useEffect(()=>{c()},[]),{state:o,handleChecked:p}},ne=()=>{const{state:o,handleChecked:n}=oe(),c={formControlLabel:{height:30,"&:hover":{background:"#e9eff4"}}};return h(i,{container:!0,children:[e(i,{item:!0,xs:12,children:e(g,{variant:"subtitle2",fontWeight:600,children:"Informaci\xF3n tributaria"})}),e(i,{item:!0,xs:12,pl:1.5,mt:1,children:h(ee,{children:[e(I,{sx:c.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>n("responsableIVA",o.responsableIVA),control:e(y,{tabIndex:-1,checked:o.responsableIVA,disableRipple:!0}),label:e(g,{variant:"body1",children:"\xBFEs responsable de IVA?"})}),e(I,{sx:c.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>n("autorretenedor",o.autorretenedor),control:e(y,{tabIndex:-1,checked:o.autorretenedor,disableRipple:!0}),label:e(g,{variant:"body1",children:"\xBFEs autoretenedor?"})}),e(I,{sx:c.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>n("declarante",o.declarante),control:e(y,{tabIndex:-1,checked:o.declarante,disableRipple:!0}),label:e(g,{variant:"body1",children:"\xBFEs declarente?"})}),e(I,{sx:c.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>n("granContribuyente",o.granContribuyente),control:e(y,{tabIndex:-1,checked:o.granContribuyente,disableRipple:!0}),label:e(g,{variant:"body1",children:"\xBFEs gran contribuyente?"})}),e(I,{sx:c.formControlLabel,componentsProps:{typography:{variant:"body1"}},onClick:()=>n("autoRetenedorICA",o.autoRetenedorICA),control:e(y,{tabIndex:-1,checked:o.autoRetenedorICA,disableRipple:!0}),label:e(g,{variant:"body1",children:"\xBFEs auto retenedor ICA?"})})]})})]})},xe=()=>{const{isLoading:o,handleChange:n,handleguardar:c,isSaving:p,onInputChange:m,state:l,validation:s,selectedCiudad:f,stateBancos:b,statetipoCuenta:v}=re();return h(D,{children:[e(W,{title:"Informaci\xF3n bancaria"}),e(E,{sx:{m:"1px",background:"white",height:"calc(100vh - 150px)"},children:o?e(E,{m:5,children:e(J,{NoColumnas:3,NoFilas:4,Tipo:"formulario"})}):e(i,{children:e(E,{children:e(i,{container:!0,width:"100%",display:"flex",justifyContent:"center",spacing:2,mt:0,children:h(i,{item:!0,xs:10,container:!0,spacing:2,children:[e(i,{item:!0,xs:12,style:{display:"flex",justifyContent:"end"},children:h(H,{variant:"text",children:[" ",e(Q,{sx:{mr:"8px"}}),"Historial"]})}),e(i,{item:!0,xs:6,children:h(A,{fullWidth:!0,children:[e(T,{id:"demo-simple-select-label",children:"Banco"}),e(F,{size:"small",labelId:"demo-simple-select-label",id:"demo-simple-select",error:s.banco.hasError,label:"Age",value:l.banco,onChange:d=>{n("banco",d.target.value)},children:b.map(d=>e(P,{value:d.id,children:d.texto},d.id))}),s.tipoCuenta.hasError&&e(S,{children:s.banco.msn})]})}),e(i,{item:!0,xs:6,children:h(A,{fullWidth:!0,children:[e(T,{id:"demo-simple-select-label",children:"Tipo de cuenta"}),e(F,{size:"small",name:"tipocuenta",error:s.tipoCuenta.hasError,value:l.tipoCuenta,labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Age",onChange:d=>{n("tipoCuenta",d.target.value)},children:v.map(d=>e(P,{value:d.id,children:d.codigo},d.id))}),s.tipoCuenta.hasError&&e(S,{children:s.tipoCuenta.msn})]})}),e(i,{item:!0,xs:6,children:e(B,{id:"txtnumero",label:"N\xFAmero de cuenta",value:l.numero,fullWidth:!0,required:!0,name:"numero",error:s.numero.hasError,helperText:s.numero.msn,onChange:m,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},size:"small"})}),e(i,{item:!0,xs:6,children:e(X,{label:"Ciudad",method:"Ciudad?filter=",nombreDataOcject:"nombre",fnSeleted:f,showError:s.ciudad,defaultValue:{id:l.ciudad,nombre:l.ciudadTexto}})}),e(i,{item:!0,xs:6,children:e(B,{id:"txtcorreopago",label:"Correo notificaci\xF3n pagos",value:l.correoPagos,fullWidth:!0,required:!0,name:"correoPagos",error:s.correoPago.hasError,helperText:s.correoPago.msn,onChange:m,size:"small"})}),e(i,{item:!0,xs:12,children:e(U,{})}),e(i,{item:!0,xs:12,children:e(ne,{})}),e(i,{item:!0,xs:12,style:{display:"flex",justifyContent:"end"},children:e(K,{direction:"row",children:e($,{type:"submit",loadingPosition:"end",variant:"contained",onClick:c,loading:p,endIcon:e(Z,{}),children:"Guardar"})})})]})})})})})]})};export{xe as InfBancariaPage,xe as default};
