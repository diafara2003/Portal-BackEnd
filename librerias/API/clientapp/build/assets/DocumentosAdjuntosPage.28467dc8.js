import{l as Z,k as ee,s as oe,m as _,D as te,r as m,u as re,_ as ae,j as t,aI as ie,n as ne,t as C,o as se,a as P,b as L,g as D,i as z,h as T,aH as B,Y as M,d as x,a2 as q,aJ as le,P as de,aK as ue,aL as ce,$ as pe,am as ve,a0 as me,B as $,T as I,G as j,L as he,f as fe,a3 as ge,aM as be}from"./index.ad9b7e92.js";import{S as xe,H as Ce}from"./HeaderComponent.0bc9406d.js";import{P as $e}from"./Popper.d79c6681.js";import{S as N}from"./SkeletonDynamic.d264f9d2.js";import{S as ye}from"./SinInformacion.9e7bb934.js";import{T as _e}from"./Tooltip.76d5c635.js";import{T as Re,a as je}from"./Tabs.f8373235.js";import{C as Ae,a as De,b as ze}from"./CardHeader.67279b64.js";function Te(o){return ee("MuiButtonGroup",o)}const Oe=Z("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),R=Oe,Be=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Pe=(o,e)=>{const{ownerState:r}=o;return[{[`& .${R.grouped}`]:e.grouped},{[`& .${R.grouped}`]:e[`grouped${C(r.orientation)}`]},{[`& .${R.grouped}`]:e[`grouped${C(r.variant)}`]},{[`& .${R.grouped}`]:e[`grouped${C(r.variant)}${C(r.orientation)}`]},{[`& .${R.grouped}`]:e[`grouped${C(r.variant)}${C(r.color)}`]},e.root,e[r.variant],r.disableElevation===!0&&e.disableElevation,r.fullWidth&&e.fullWidth,r.orientation==="vertical"&&e.vertical]},Ie=o=>{const{classes:e,color:r,disabled:n,disableElevation:s,fullWidth:a,orientation:l,variant:c}=o,p={root:["root",c,l==="vertical"&&"vertical",a&&"fullWidth",s&&"disableElevation"],grouped:["grouped",`grouped${C(l)}`,`grouped${C(c)}`,`grouped${C(c)}${C(l)}`,`grouped${C(c)}${C(r)}`,n&&"disabled"]};return se(p,Te,e)},Le=oe("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Pe})(({theme:o,ownerState:e})=>_({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},e.variant==="contained"&&{boxShadow:(o.vars||o).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${R.grouped}`]:_({minWidth:40,"&:not(:first-of-type)":_({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1}),"&:not(:last-of-type)":_({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:o.vars?`1px solid rgba(${o.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${o.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:o.vars?`1px solid rgba(${o.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${o.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},e.variant==="text"&&e.color!=="inherit"&&{borderColor:o.vars?`rgba(${o.vars.palette[e.color].mainChannel} / 0.5)`:te(o.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(o.vars||o).palette.grey[400]}`,[`&.${R.disabled}`]:{borderRight:`1px solid ${(o.vars||o).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(o.vars||o).palette.grey[400]}`,[`&.${R.disabled}`]:{borderBottom:`1px solid ${(o.vars||o).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(o.vars||o).palette[e.color].dark},{"&:hover":_({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),"&:hover":_({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"})})),Me=m.exports.forwardRef(function(e,r){const n=re({props:e,name:"MuiButtonGroup"}),{children:s,className:a,color:l="primary",component:c="div",disabled:p=!1,disableElevation:i=!1,disableFocusRipple:u=!1,disableRipple:b=!1,fullWidth:d=!1,orientation:h="horizontal",size:v="medium",variant:g="outlined"}=n,y=ae(n,Be),f=_({},n,{color:l,component:c,disabled:p,disableElevation:i,disableFocusRipple:u,disableRipple:b,fullWidth:d,orientation:h,size:v,variant:g}),O=Ie(f),A=m.exports.useMemo(()=>({className:O.grouped,color:l,disabled:p,disableElevation:i,disableFocusRipple:u,disableRipple:b,fullWidth:d,size:v,variant:g}),[l,p,i,u,b,d,v,g,O.grouped]);return t(Le,_({as:c,role:"group",className:ne(O.root,a),ref:r,ownerState:f},y,{children:t(ie.Provider,{value:A,children:s})}))}),Fe=Me,Ee=()=>{const[o,e]=m.exports.useState(),[r,n]=m.exports.useState(!0),s=async()=>{const a={AllowAnonymous:!1,metodo:"Constructora",type:P.GET},l=await L(a);e(l),n(!1)};return m.exports.useEffect(()=>{s()},[]),{dataConst:o!=null?o:[],isLoading:r}};var F={},ke=z.exports;Object.defineProperty(F,"__esModule",{value:!0});var J=F.default=void 0,Ge=ke(D()),We=T,He=(0,Ge.default)((0,We.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");J=F.default=He;var E={},qe=z.exports;Object.defineProperty(E,"__esModule",{value:!0});var K=E.default=void 0,Ne=qe(D()),V=T,Ve=(0,Ne.default)([(0,V.jsx)("path",{d:"M17 7h2v2h-2zm0 4h2v2h-2zm0 4h2v2h-2zM1 11v10h6v-5h2v5h6V11L8 6l-7 5zm12 8h-2v-5H5v5H3v-7l5-3.5 5 3.5v7z"},"0"),(0,V.jsx)("path",{d:"M10 3v1.97l2 1.43V5h9v14h-4v2h6V3z"},"1")],"MapsHomeWorkOutlined");K=E.default=Ve;const Se=({selected:o})=>{const{dataConst:e,isLoading:r}=Ee(),[n,s]=B.useState(!1),a=B.useRef(null),[l,c]=B.useState(0),p=()=>{o(e[l])},i=(d,h)=>{c(h),s(!1),o(e[h])},u=()=>{s(d=>!d)},b=d=>{a.current&&a.current.contains(d.target)||s(!1)};return t(M,{children:r?t(xe,{}):x(M,{children:[x(Fe,{variant:"contained",ref:a,"aria-label":"split button",children:[t(q,{startIcon:t(K,{}),onClick:p,children:e[l].nombre}),t(q,{size:"small","aria-controls":n?"split-button-menu":void 0,"aria-expanded":n?"true":void 0,"aria-label":"","aria-haspopup":"menu",onClick:u,children:t(J,{})})]}),t($e,{sx:{zIndex:1},open:n,anchorEl:a.current,role:void 0,transition:!0,disablePortal:!0,children:({TransitionProps:d,placement:h})=>t(le,{...d,style:{transformOrigin:h==="bottom"?"center top":"center bottom"},children:t(de,{children:t(ue,{onClickAway:b,children:t(ce,{id:"split-button-menu",autoFocusItem:!0,children:e.map((v,g)=>t(pe,{selected:g===l,onClick:y=>i(y,g),children:v.nombre},v.id))})})})})})]})})},Ue=()=>{const{storeUsuario:o}=m.exports.useContext(ve),[e,r]=m.exports.useState(),[n,s]=m.exports.useState(!0),[a,l]=m.exports.useState(),[c,p]=m.exports.useState([]),i=async()=>{const d={AllowAnonymous:!1,metodo:`documentos/tercero?id=${o.user.idEmpresa}`,type:P.GET},h=await L(d);r(h),s(!1)},u=async()=>{if(a!=null){const d={AllowAnonymous:!1,metodo:`DocumentosERP/requeridos?constructora=${a==null?void 0:a.id}`,type:P.GET},h=await L(d),v=await b(h);p(v),console.log(c)}s(!1)},b=async d=>{let h={tiposAdjuntos:[],especialidad:0,nombreEspecialidad:""},v=[];return d==null||d.forEach(g=>{let y=v.findIndex(f=>f.especialidad==g.especialidad);y!=-1?v[y].tiposAdjuntos.push(e.filter(f=>f.tipoAdjunto.id==g.tipoAdjunto)[0]):(h={especialidad:g.especialidad,nombreEspecialidad:g.nombreEspecialidad,tiposAdjuntos:e.filter(f=>f.tipoAdjunto.id==g.tipoAdjunto)},v.push(h))}),v};return m.exports.useEffect(()=>{i()},[]),m.exports.useEffect(()=>{s(!0),u()},[a]),{dataDoc:e,dataAdjPorConst:c,isLoading:n,setDataConst:l,storeUsuario:o}},Je=({file:o,idOrigen:e,idOrigen2:r,tipo:n,uploadedCompleted:s})=>{const{data:a,doFetch:l,downloadFile:c,isLoading:p}=me(),[i,u]=m.exports.useState(o),[b,d]=m.exports.useState(o.nombre),[h,v]=m.exports.useState(!1),g=f=>{if(f==null)return;const O=f.target.files[0];var A=new FormData;A.append("archivo",O),A.append("Tipo",n),A.append("OrigenID",e),A.append("OrigenID2",r),l({metodo:"Documentos/UploadFiles",type:P.POST,AllowAnonymous:!1,data:A,isformData:!0})},y=async()=>{v(()=>!0),await c(`Documentos/Descargar?id=${i.id}`),v(()=>!1)};return m.exports.useEffect(()=>{if(a!=null&&a!=null){const f=a[0];u(f),s(f),d(f.nombre)}},[a]),{isLoading:p,document:i,textoFile:b,saveFile:g,descargarArchivo:y,download:h}};var k={},Ke=z.exports;Object.defineProperty(k,"__esModule",{value:!0});var w=k.default=void 0,we=Ke(D()),Ye=T,Qe=(0,we.default)((0,Ye.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");w=k.default=Qe;var G={},Xe=z.exports;Object.defineProperty(G,"__esModule",{value:!0});var Y=G.default=void 0,Ze=Xe(D()),eo=T,oo=(0,Ze.default)((0,eo.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");Y=G.default=oo;var W={},to=z.exports;Object.defineProperty(W,"__esModule",{value:!0});var Q=W.default=void 0,ro=to(D()),ao=T,io=(0,ro.default)((0,ao.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");Q=W.default=io;var H={},no=z.exports;Object.defineProperty(H,"__esModule",{value:!0});var X=H.default=void 0,so=no(D()),lo=T,uo=(0,so.default)((0,lo.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"}),"FileUploadOutlined");X=H.default=uo;const S=o=>{var u,b;const{isLoading:e,document:r,saveFile:n,textoFile:s,descargarArchivo:a,download:l}=Je({file:o.file.adjunto,idOrigen:o.idOrigen,idOrigen2:(u=o.idOrigen2)!=null?u:"",tipo:o.tipo,uploadedCompleted:o.uploadedCompleted});let c=!1;o.readonly!=null&&(c=o.readonly);let p=o.file.tipoAdjunto.nombre.split("(")[0],i=(b=o.file.tipoAdjunto.nombre.split("(")[1])==null?void 0:b.replace(")","");return x($,{sx:{flexGrow:1,overflow:"",px:3},children:[x($,{display:"flex",children:[x(I,{noWrap:!0,variant:"subtitle1",fontWeight:600,fontSize:14,children:[" ",p]}),i!=null?t(_e,{children:t(Q,{sx:{ml:1},color:"primary"}),title:i}):""]}),x(j,{mt:1,container:!0,columnSpacing:{xs:1},children:[t(j,{item:!0,xs:c?11:8,mt:1,children:s==""?t(I,{color:"gray",variant:"subtitle2",children:" Seleccione un archivo... "}):x($,{display:"flex",children:[" ",x(I,{noWrap:!0,variant:"subtitle2",children:[" ",s]}),t(w,{sx:{ml:1},color:"success"})]})}),c?null:t(j,{item:!0,xs:3,children:x(he,{variant:"outlined",component:"label",loading:e,loadingPosition:"start",startIcon:t(X,{color:"primary"}),children:["Cargar",t("input",{hidden:!0,type:"file",onChange:d=>{n(d)}})]})}),r.id>0?t(j,{item:!0,xs:1,children:t(fe,{color:"primary","aria-label":"upload picture",component:"label",onClick:a,children:l?t(ge,{color:"success",size:20}):t(Y,{color:"success"})})}):null]})]},o.file.tipoAdjunto.id.toString())},U=o=>{const{children:e,value:r,index:n,...s}=o;return t("div",{role:"tabpanel",hidden:r!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,...s,children:r===n&&t($,{sx:{p:3},children:e})})};function co(o){return{id:`simple-tab-${o}`,"aria-controls":`simple-tabpanel-${o}`}}const Co=()=>{const o=[{nombre:"Documentos generales",id:1,addTitle:"Nuevo contacto documentaci\xF3n"},{nombre:"Documentos por empresa",id:2,addTitle:"Nuevo contacto licitaci\xF3n"}],[e,r]=B.useState(0),n=(i,u)=>{r(u)},{dataDoc:s,dataAdjPorConst:a,isLoading:l,setDataConst:c,storeUsuario:p}=Ue();return x(M,{children:[t(Ce,{title:"Documentos adjuntos"}),x($,{sx:{width:"100%"},children:[t($,{pt:1,children:t(Re,{value:e,onChange:n,"aria-label":"basic tabs example",sx:{borderBottom:1,borderColor:"divider"},children:o.map((i,u)=>t(je,{label:i.nombre,...co(u)},`tab-key-${i.nombre}`))})}),t(U,{value:e,index:0,children:t($,{m:1,mt:1,sx:{justifyContent:"center",display:"flex"},className:"JKDoc",children:l?t(N,{NoColumnas:2,NoFilas:1,Tipo:"card"}):t($,{sx:{backgroundColor:"white"},maxWidth:"lg",children:t(j,{container:!0,spacing:2,children:s==null?void 0:s.map(i=>t(j,{item:!0,xs:6,children:t(S,{idOrigen:p.user.id.toString(),idOrigen2:i.tipoAdjunto.id.toString(),tipo:"tercero",file:i,uploadedCompleted:u=>{}},`upload-tab0-id${i.tipoAdjunto.id}`)},`div-upload-tab0-id${i.tipoAdjunto.id}`))})})})}),x(U,{value:e,index:1,children:[t($,{display:"flex",justifyContent:"end",m:1,mt:1,children:t(Se,{selected:i=>{c(i)}})}),t($,{m:1,mt:1,children:l?t(N,{NoColumnas:1,NoFilas:1,Tipo:"card"}):a.length==0?t($,{justifyContent:"center",display:"flex",children:t(ye,{})}):t(be,{sx:{backgroundColor:"white"},maxWidth:"lg",children:a==null?void 0:a.map(i=>x(Ae,{elevation:3,sx:{mt:2},children:[t(De,{title:i.nombreEspecialidad,titleTypographyProps:{fontWeight:"600"}}),t(ze,{sx:{mb:3},children:t(j,{container:!0,spacing:3,className:"JK",children:i.tiposAdjuntos.map(u=>t(j,{item:!0,xs:6,children:t(S,{idOrigen:p.user.id.toString(),idOrigen2:u.tipoAdjunto.id.toString(),tipo:"tercero",file:u,uploadedCompleted:b=>{}},`upload-tab1-id${u.tipoAdjunto.id}`)}))})})]}))})})]})]})]})};export{Co as DocumentosAdjuntosPage,Co as default};
