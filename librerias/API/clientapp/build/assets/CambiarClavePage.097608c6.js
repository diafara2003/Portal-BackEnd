import{d as O}from"./Save.e9030533.js";import{c as v,j as e,r as u,A as R,a as z,b as L,d as i,B as N,G as l,e as S,T as I,F as p,I as P,O as C,f,L as M}from"./index.ad9b7e92.js";import{F as V}from"./Fondo.02dc25e2.js";import{C as q,a as k,b as B}from"./CardHeader.67279b64.js";import{I as g}from"./InputAdornment.67d4ad97.js";import{C as D}from"./CardActions.8f5f35f6.js";const x=v(e("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility"),b=v(e("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),T=()=>{const{showAlert:d,stateAlert:m}=u.exports.useContext(R),[a,w]=u.exports.useState({PassNew:"",PassNewR:"",PassOld:""}),[o,n]=u.exports.useState({showPassNew:!1,showPassNewR:!1,showPassOld:!1}),[r,c]=u.exports.useState(!1),h=s=>{const{name:t,value:j}=s.target;w({...a,[t]:j})},F=s=>{if(s.preventDefault(),a.PassOld!=""&&a.PassNew!=""&&a.PassNewR!=""){const t=A();t.permite?y():d(t.mensaje,"Cambiar contrase\xF1a","warning")}},y=async()=>{c(!0);const s={metodo:"Account/cambioClave",AllowAnonymous:!1,type:z.POST,data:a},t=await L(s);c(()=>!1),d(t.mensaje,"Cambiar contrase\xF1a",t.success?"success":"warning")},A=()=>{let s={mensaje:"",permite:!0};return a.PassNew.replace(/ /g,"").length<6||a.PassNewR.replace(/ /g,"").length<6?(s.mensaje="La contrase\xF1a debe incluir minimo 6 caracteres",s.permite=!1,s):a.PassNew.replace(/ /g,"").match(/[A-Z]/)==null||a.PassNewR.replace(/ /g,"").match(/[A-Z]/)==null?(s.mensaje="La contrase\xF1a debe incluir un letra mayuscula",s.permite=!1,s):a.PassNew.replace(/ /g,"").match(/[a-z]/)==null||a.PassNewR.replace(/ /g,"").match(/[a-z]/)==null?(s.mensaje="La contrase\xF1a debe incluir un letra minuscula",s.permite=!1,s):a.PassNew.replace(/ /g,"").match(/\d/)==null||a.PassNewR.replace(/ /g,"").match(/\d/)==null?(s.mensaje="La contrase\xF1a debe incluir un numero",s.permite=!1,s):(a.PassNew!=a.PassNewR&&(s.mensaje="La contrase\xF1as no coinciden",s.permite=!1),s)};return{...a,showPass:o,handleShowPassword:s=>{const t=s;n({...o,[s]:!o[t]})},onInputChange:h,handleSubmit:F,stateAlert:m,isLoading:r}},K=()=>{const{PassNew:d,PassNewR:m,PassOld:a,handleSubmit:w,onInputChange:o,handleShowPassword:n,showPass:r,isLoading:c,stateAlert:h}=T();return i(N,{children:[e(l,{item:!0,xs:12,mt:1,position:"absolute",mr:2,children:e(V,{})}),i(l,{container:!0,justifyContent:"center",position:"relative",top:79,children:[h.estado?e(S,{}):null,e(l,{item:!0,xs:6,children:i(q,{children:[e(k,{title:e(I,{variant:"body1",children:"Cambiar contrase\xF1a"})}),e(B,{children:i(l,{container:!0,spacing:2,children:[e(l,{item:!0,xs:12,mb:4,children:i(p,{sx:{width:"100%"},variant:"outlined",children:[e(P,{htmlFor:"outlined-adornment-password",children:"Contrase\xF1a anterior"}),e(C,{size:"small",required:!0,fullWidth:!0,name:"PassOld",label:"Contrase\xF1a anterior",value:a,id:"password",onChange:o,autoComplete:"new-password",type:r.showPassOld?"text":"password",endAdornment:e(g,{position:"end",children:e(f,{"aria-label":"toggle password visibility",onClick:()=>n("showPassOld"),onMouseDown:()=>n("showPassOld"),edge:"end",children:r.showPassOld?e(x,{}):e(b,{})})})})]})}),e(l,{item:!0,xs:12,children:i(p,{sx:{width:"100%"},variant:"outlined",children:[e(P,{htmlFor:"outlined-adornment-password",children:"Contrase\xF1a nueva"}),e(C,{size:"small",required:!0,fullWidth:!0,name:"PassNew",label:"Contrase\xF1a nueva",onChange:o,value:d,id:"password",autoComplete:"new-password",type:r.showPassNew?"text":"password",endAdornment:e(g,{position:"end",children:e(f,{"aria-label":"toggle password visibility",onClick:()=>n("showPassNew"),onMouseDown:()=>n("showPassNew"),edge:"end",children:r.showPassNew?e(x,{}):e(b,{})})})})]})}),e(l,{item:!0,xs:12,children:i(p,{sx:{width:"100%"},variant:"outlined",children:[e(P,{htmlFor:"outlined-adornment-password",children:"Confirmar contrase\xF1a nueva"}),e(C,{size:"small",required:!0,fullWidth:!0,name:"PassNewR",label:"Confirmar contrase\xF1a nueva",onChange:o,value:m,id:"password",autoComplete:"new-password",type:r.showPassNewR?"text":"password",endAdornment:e(g,{position:"end",children:e(f,{"aria-label":"toggle password visibility",onClick:()=>n("showPassNewR"),onMouseDown:()=>n("showPassNewR"),edge:"end",children:r.showPassNewR?e(x,{}):e(b,{})})})})]})})]})}),e(D,{children:e(N,{display:"flex",justifyContent:"end",width:"100%",children:e(M,{type:"submit",loading:c,onClick:w,loadingPosition:"start",variant:"contained",startIcon:e(O,{}),children:"Cambiar contrase\xF1a"})})})]})})]})]})};export{K as CambiarClavePage,K as default};
